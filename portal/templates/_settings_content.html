<section id="settings-content" class="content-section hidden">
    <header class="mb-6">
        <h2 class="text-2xl font-semibold text-gray-800">Cài đặt</h2> <p class="text-sm text-gray-500">Quản lý cấu hình giám sát và phân tích.</p> </header>
    <div class="bg-white rounded-lg shadow border border-gray-200 p-6 space-y-8"> <div class="config-section">
             <h3 class="text-xl font-semibold mb-4 text-gray-700">Cài đặt Agent Chung</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                 <div>
                     <label for="scan-interval" class="form-label">Tần suất quét (giây)</label>
                     <input type="number" id="scan-interval" name="scan_interval_seconds" min="10" step="1" class="form-input w-full">
                     <p class="form-description">Khoảng thời gian giữa các lần quét (tối thiểu 10).</p>
                 </div>
                  <div>
                     <label for="restart-threshold" class="form-label">Ngưỡng khởi động lại Container</label>
                     <input type="number" id="restart-threshold" name="restart_count_threshold" min="1" step="1" class="form-input w-full">
                     <p class="form-description">Số lần khởi động lại để coi là sự cố.</p>
                 </div>
                  <div>
                     <label for="loki-scan-level" class="form-label">Mức log quét Loki tối thiểu</label>
                     <select id="loki-scan-level" name="loki_scan_min_level" class="form-select w-full">
                         <option value="DEBUG">DEBUG</option>
                         <option value="INFO">INFO</option>
                         <option value="WARNING">WARNING</option>
                         <option value="ERROR">ERROR</option>
                         <option value="CRITICAL">CRITICAL</option>
                     </select>
                     <p class="form-description">Mức log tối thiểu để agent quét ban đầu.</p>
                 </div>
                   <div>
                     <label for="alert-cooldown" class="form-label">Thời gian chờ cảnh báo lại (phút)</label>
                     <input type="number" id="alert-cooldown" name="alert_cooldown_minutes" min="1" step="1" class="form-input w-full">
                     <p class="form-description">Thời gian chờ trước khi gửi lại cảnh báo cho cùng một pod.</p>
                 </div>
                  <div class="md:col-span-2">
                     <label for="alert-levels" class="form-label">Mức độ gửi cảnh báo Telegram</label>
                     <input type="text" id="alert-levels" name="alert_severity_levels" placeholder="WARNING,ERROR,CRITICAL" class="form-input w-full">
                     <p class="form-description">Các mức độ nghiêm trọng sẽ gửi cảnh báo, cách nhau bởi dấu phẩy (không phân biệt hoa thường).</p>
                 </div>
             </div>
             <div class="flex justify-end items-center pt-6">
                  <span id="save-general-config-status" class="text-sm mr-4 hidden"></span>
                  <button id="save-general-config-button" class="bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-5 rounded-lg shadow transition duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed">
                      Lưu Cài đặt Chung
                  </button>
             </div>
         </div>
        <div class="config-section">
             <h3 class="text-xl font-semibold mb-4 text-gray-700">Cấu hình Telegram</h3> <div class="space-y-4">
                 <div class="flex items-center justify-between mb-4">
                     <label for="enable-telegram-toggle" class="form-label mb-0">Bật cảnh báo Telegram</label>
                     <label class="toggle-switch">
                         <input type="checkbox" id="enable-telegram-toggle">
                         <span class="toggle-slider"></span>
                     </label>
                 </div>
                 <p class="form-description -mt-3 mb-4">Bật để gửi cảnh báo đến Telegram khi có sự cố.</p>
                 <div>
                     <label for="telegram-token" class="form-label">Bot Token</label>
                     <input type="password" id="telegram-token" name="telegram_bot_token" placeholder="Để trống nếu không thay đổi" class="form-input w-full">
                     <p class="form-description">Token của Telegram Bot dùng để gửi cảnh báo.</p>
                 </div>
                  <div>
                     <label for="telegram-chat-id" class="form-label">Chat ID</label>
                     <input type="text" id="telegram-chat-id" name="telegram_chat_id" placeholder="Nhập Chat ID (ví dụ: -100123... hoặc ID người dùng)" class="form-input w-full">
                     <p class="form-description">ID của group hoặc người dùng nhận cảnh báo.</p>
                 </div>
             </div>
             <div class="flex justify-end items-center pt-6">
                  <span id="save-telegram-config-status" class="text-sm mr-4 hidden"></span>
                  <button id="save-telegram-config-button" class="bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2 px-5 rounded-lg shadow transition duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed">
                      Lưu Cấu hình Telegram
                  </button>
             </div>
         </div>
        <div class="config-section">
             <h3 class="text-xl font-semibold mb-4 text-gray-700">Giám sát Namespace</h3> <p class="text-sm text-gray-600 mb-4">Chọn các namespace bạn muốn agent theo dõi. Thay đổi sẽ có hiệu lực sau vài phút.</p> <div id="namespace-list" class="namespace-list border border-gray-300 rounded-md p-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 mb-5"> <p id="namespace-loading-text" class="text-gray-500 col-span-full text-center py-4">Đang tải danh sách namespace...</p> </div>
             <div class="flex justify-end items-center">
                  <span id="save-ns-config-status" class="text-sm mr-4 hidden"></span>
                  <button id="save-ns-config-button" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-5 rounded-lg shadow transition duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed">
                      Lưu Namespaces
                  </button>
             </div>
         </div>
        <div class="config-section">
             <h3 class="text-xl font-semibold mb-4 text-gray-700">Cấu hình Phân tích AI</h3> <div class="space-y-4">
                 <div class="flex items-center justify-between">
                     <label for="enable-ai-toggle" class="form-label">Bật Phân tích AI</label>
                     <label class="toggle-switch">
                         <input type="checkbox" id="enable-ai-toggle">
                         <span class="toggle-slider"></span>
                     </label>
                 </div>
                 <div id="ai-provider-options" class="space-y-4 mt-4 hidden">
                     <div>
                         <label for="ai-provider-select" class="form-label">AI Provider</label>
                         <select id="ai-provider-select" name="ai_provider" class="form-select mt-1 block w-full">
                             <option value="gemini">Google Gemini</option>
                             <option value="local">Local Model</option>
                             <option value="openai">OpenAI (Chưa hỗ trợ)</option>
                             <option value="groq">Groq (Chưa hỗ trợ)</option>
                             <option value="deepseek">Deepseek (Chưa hỗ trợ)</option>
                             <option value="none">Không sử dụng (Tắt)</option>
                         </select>
                     </div>
                      <div>
                         <label for="ai-model-identifier" class="form-label">Model Identifier</label>
                         <input type="text" name="ai_model_identifier" id="ai-model-identifier" placeholder="Ví dụ: gemini-1.5-flash"
                                class="form-input mt-1 block w-full">
                          <p class="form-description">Nhập tên model cụ thể (ví dụ: gemini-1.5-flash, gpt-4o, ...). Để trống nếu dùng provider 'local'.</p>
                     </div>
                      <div>
                         <label for="ai-api-key" class="form-label">API Key</label>
                         <input type="password" name="ai_api_key" id="ai-api-key" placeholder="Để trống nếu không thay đổi"
                                class="form-input mt-1 block w-full">
                         <p class="form-description">Nhập API key mới nếu muốn cập nhật. Key sẽ không được hiển thị lại.</p>
                     </div>
                 </div>
                 <div class="flex justify-end items-center pt-4">
                      <span id="save-ai-config-status" class="text-sm mr-4 hidden"></span>
                      <button id="save-ai-config-button" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-5 rounded-lg shadow transition duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed">
                          Lưu Cấu hình AI
                      </button>
                 </div>
             </div>
         </div>
     </div>
</section>
